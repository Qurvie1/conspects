Определение. Пусть $(X, m)$ - измеримое пространство, тогда функция $f: X \rightarrow R$ называется простой, если множество её значений конечно.

То есть существует $[a_{1}, ..., a_{n}] \subset R^{n}$ - конечное множество чисел и конечное число измеримых множеств $E_{1}, ..., E_{n}$, которые попарно непересекаются.

Такие, что:
$$
f(x) = \sum\limits_{k=1}^{n} a_{k} \psi_{E_{k}}(x)
$$
Пример - функция Дирихле, так как характеристическая функция рациональных точек.

Замечание: набор множеств может быть выбран не единственным способом (может происходить так как числа совпадают и можно какие-то множества объединить).

Определение корректно, так как если есть 2 различных представления, то их пересечения тоже образуют допустимый набор.

Лемма. Сумма, разность и произведение простых функций будут простыми функциями. 
$$
f(x) = \sum\limits_{k=1}^{N} a_{k} \psi_{E_{k}}(x)
$$
$$
g(x) = \sum\limits_{k=1}^{N'} a_{k}' \phi_{E_{k}'}(x)
$$
Тогда:
$$
f(x)g(x) = \sum\limits_{i,j = 1}^{N,N'} a_{i}a_{j}'\psi_{E_{i} \cap E_{j}'}(x)
$$
Аналогично для суммы и разности.

Теперь самая главная теорема - простые функции приближают любую [[Измеримые функции|измеримую функцию]].

Любая измеримая функция есть поточечный предел простых.

Пусть $(X, m)$ - измеримое пространство, пусть $f: X \rightarrow \bar{R}$ - измеримая функция.

Тогда $\exists$ последовательность $[f_{n}]$ - простых функций, такая, что:
$$
f_{n} \rightarrow_{X} f
$$
Тут нам нужна центральная идея Лебега.

Вот рассыпаны деньги и нам нужно их быстро посчитать. Можно по одной. А можно расфасовать купюры по 10, 100, 500 рублей и быстро посчитать.

То есть мы будем анализировать не область определения функции, а область значений, а потом посмотрим где они принимаются.

Шаг 1. Пусть $f \geq 0$

Фиксируем натуральное число $n$, рассмотрим множество точек, где значение функции $[0, n]$ и множество, где $(n, +inf]$

И разобъём отрезок $[0, n]$ следующим образом:
$$
[0, n] = \cup_{k=0}^{n^{2} - 1} \Delta_{k,n}
$$
Где:
$$
\Delta_{k,n} = [\frac{k}{n}, \frac{k + 1}{n}]
$$
То есть у отрезок нарезан на $n$ кусков и каждый из них ещё на $n$ частей.
Теперь посмотрим прообразы.

Пусть $E_{k,n} = f^{-1}(\Delta_{k,n})$. Это множество измеримо.

Тогда возьмём функцию следующим образом:
$$
f_{n}(x) = \frac{k}{n}, \forall x \in E_{k,n}
$$
Теперь оценим модуль:
$$
|f_{n}(x) - f(x)| \leq \frac{1}{n}
$$
То есть вот в чём отличие от интеграла Римана - мы дробим отрезок множества значений с небольшим колебанием. А вот на множестве определения колебание могло быть сильно больше.

Тогда что такое всё $X$?:
$$
X = f^{-1}([0, n)) \cup f^{-1}([n, +inf])
$$
На левом множестве мы определили функцию, теперь надо на правом множестве
$$
f_{n}(x) = n, \forall x \in f^{-1}([n, +inf])
$$
И теперь получается, что правое множество - измеримое и $E_{k,n}$ - тоже.

То есть $f_{n}$ - простая функция. Осталось понять, почему она сходится поточечно.
Где функция равна бесконечности?:
$$
f^{-1}([-inf]) = \cap f^{-1}([n, +inf])
$$
Но на этом множестве $(E_{inf})$, $f_{n}(x) = n$ (любая $n$ функция)

Тогда $$
\lim f_{n}(x) = +inf
$$
Для всех $x \in E_{inf}$

Если же $x \in X / E_{inf}$, то тогда существует $N$ такое, что $f(x) \in [0, n)$ для всех $n \in N$

Ну а где спаведлива оценка на разность функций? На объединении всех $E_{k,n}$

Но тогда отклонение станет меньше $\frac{1}{n}$ для всех $n \geq N$, то есть существует предел.

Шаг 2. А если функция не $f \geq 0$, определим $f_{+}(x) = \max [f(x), 0]$
$f_{-}(x) = \max(-f(x), 0)$

Тогда:
$$
f(x) = f_{+}(x) - f_{-}(x)
$$
Провернём рассуждения для этих функций такие же.
