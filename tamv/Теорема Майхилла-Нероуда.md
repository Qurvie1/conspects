[[Отношение эквивалентности]].

Мы получаем фактор-множество на которое бьёт множество отношений эквивалентности.

Если у нас есть 2 отношения эквивалентности $=_{1}$ и $=_{2}$

Тогда если $x =_{1} y \implies x =_{2} y$, то первое - мельче или тоньше, а второе грубее.

$A$ - это [[Детерминированные конечные автоматы|ДКА]] над алфавитом $\Sigma$ .

Тогда $=_{A}$ порождается на $\Sigma^{*}$

$$
x =_{A} y \iff \delta^{*}(s, x) = \delta^{*}(s, y)
$$
$L(A)$ - есть объединение классов эквивалентности по $=_{A}$

$$
x =_{A} y \implies \forall z \in \Sigma^{*} xz =_{A} yz
$$
(это свойство называется право-инвариантностью).
Пусть $L$ - язык над $\Sigma$ (любой), он тоже порождает $=_{L}$ на $\Sigma^{*}$

$$
x =_{L} y \iff (\forall z \in \Sigma^{*} xz \in L \iff yz \in L)
$$
Если $x \in L, x =_{L} y \implies y \in L$

$=_{L}$ называется отношением эквивалентности Майхилла-Нероуда (МН).

Лемма. Пусть $=_{?}$ - отношение эквивалености на $\Sigma^{*}$.

Пусть $L$ - язык.
Пусть $=_{?}$ - право-инвариантное
Пусть $L$ есть объединение нескольких классов эквивалентности по $=_{?}$.

Тогда $=_{L}$ - самое грубое.

Почему? 
$$
x =_{?} y \implies \forall z xz =_{?} yz \implies xz \in L \iff yz \in L \implies x =_{L} y
$$

Теперь сама теорема.

Пусть $L$ - язык над $\Sigma$.

Следующие условия эквивалентны:

1) $L$ - [[Регулярные языки и выражения|регулярный]] (то есть принимается неким ДКА.
2) $L$ - есть объединение классов эквивалентности некоторого право-инвариантного отношения эквивалентности над $\Sigma^{*}$ с каким-то фактор-множеством.
3) $|\frac{\Sigma^{*}}{=_{L}}| < inf$
4) Максимальное разделяется множество для $L$ конечно.

Более того, если $L$ - регулярный, то следующие числа равны:

$$
|\frac{\Sigma^{*}}{=_{L}}|
$$
+ размер максимального разделяющего множества
+ число состояний в минимальном ДКА $A$ таком, что $L(A) = A$

Причём очевидно, что 2 и 3 равны, потому что количество состояний не может быть меньше числа разделяющих множеств.

1->2 $=_{A}$ - подходит
2 -> 3 из Леммы
3 <-> 4 из определений.

3->1. Построим ДКА.

$$
A = (\Sigma, Q, s, F, \delta)
$$
$$
Q = [ [x]_{L} | x \in \Sigma^{*} ]
$$
$$
s = [e]_{L} 
$$
$$
F = [ [x]_{L} | x \in L ]
$$
А функцию перехода определим как:
$$
\delta(q, a) = \delta([x]_{L}, a) = [xa]_{L}
$$
То есть в силу право-инвариантности мы просто приписываем $a$ к слову и берём его класс эквивалентности.

Докажем следующий факт:
$$
\forall y \in \Sigma^{*}: \delta^{*}([e]_{L}, y) = [y]_L
$$
(Он доказывается по индукции).

$A$ принимает $y$ $\iff$ $\delta^{*}([e]_{L}, y) \in F \iff [y]_{L} \in F \iff [y]_{L} \in [[x]_{L} | x \in L]$, а это эквивалентно  $y \in L$.

Рассмотрим пример.
Алфавит 0, 1.
$L = [0, 1]$

$u, v$ причём $|u| \geq 2, |v| \geq 2$

$$
[00]_{L} = \Sigma^{*} - [e, 0, 1]
$$
$$
[e]_{L} = [e]
$$
$$
[0]_{L} = [0, 1] = L
$$
То есть всего у нас 3 класса эквивалентности, поэтому он регулярный.

И интересно, что по нему мы можем построить ДКА, где состояния - это соответствующие классы эквивалентности.

Докажем опять же нерегулярность $L = [0^{n}1^{n}|n \in N]$
Найдём все классы эквивалентности.

Если $w$ имеет вид $0^{n}1^{m}$, $m \geq n$, то всё плохо, потому что нам надо было бы приписывать префикс 0, чтоб получить слово, лежащее в языке. И все такие слова лежат в классе эквивалентности.

Если же у нас слово вида $0^{n}1^{m}$, то нам нужно приписать $n - m$ единиц и причём только такой суффикс.

При фиксированной $k = n - m$ и при всех $m$ будет верно, то есть мы будем лежать в одном классе эквивалентности.

Итого получается, что таких классов вида $[0^{k}01]$ бесконечно много.

