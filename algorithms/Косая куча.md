Косая куча

Можно убрать ранги из [[Левацкая куча|левацкой кучи]] на самом деле и просто свапать всегда - и это работает в амортизированном смысле.

Определение. Вершина правоскошенная, если sz(v->right) > sz(v->left)
Тогда потенциал - количество правоскошенных вершин. На правом пути не более чем $lgn$ не правоскошенных вершин.

Посмотрим че происходит при мелде:
$k_1$ - количество правоскошенных вершин в первой куче, $k_2$ во второй куче, $k$ - в объединённой, но без свапов

Тогда время работы(реальное) $k_1 + k_2 + 2lgn$.
Потенциал ДО $\phi_1 + \phi_2$
ПОСЛЕ: $\phi_1 + \phi_2 - k_1 - k_2 + k$

Но потом когда мы свапаем, то k правоскошенных вершин исчезают, но при этом какие-то левоскошенные вершины становятся правоскошенными, но заметим, что в силу утверждения их не более чем логарифм.
Ну и тогда просто считаем учётное время и оно $<= 3lgn$
Далее проблема начинается в erase, потому что когда мы вытаскиваем вершину, то левоскошенная становится правоскошенной, так как верхняя оценка плохая.
Но в чём плюс - если это было так, то количество вершин слева и справа было поровну, то есть когда мы пошли вверх, то каждый раз увеличивали сайз в 2 раза, то есть вершин не более, чем логарифм, поэтому верхняя оценка всё также логарифм.

Прикол в том, что если всё за O(1), то сортировка за линию. То есть в теории мы хотим оставить 1 логарифм, а всё остальное за 1.

