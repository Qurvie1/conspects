Пусть у нас $G$ - [[Граф|ориентированный ациклический граф]], тогда топологическая сортировка графа это такая нумерация вершин, что рёбра ведут только из вершин с меньшими номерами в вершины с большими номерами.

Алгоритм.
Запустим $dfs$ и запишем вершины в порядке убывания $tout$.

Почему это работает?
Определим функцию $\phi(u) = n + 1 - tout[u]$ (то есть какой номер мы присвоим вершине $u$).

Докажем теперь следующий факт, что если есть ребро $(u, v)$, то $tout[u] > tout[v]$.

1) $v$ не может быть серой, так как иначе есть цикл
2) Если $v$ - белая, то это потомок, поэтому $tout[u] > tout[v]$.
3) Если $v$ - чёрная, то мы уже установили время для $v$, а для $u$ не установили поэтому тоже выполнено.

Асимптотика очевидно $O(V + E)$